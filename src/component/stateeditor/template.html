<!-- state-template-state-list -->
{{#each state_list}}
	<div class="state-item view" data-command="{{cmd_value}}" data-id="{{state_id}}">
		<div class="state-toolbar">
			<div class="state-remove">-</div>
			<div class="state-add">+</div>
			<div class="state-id">{{#if state_id_show}}{{state_id_show}}{{else}}{{state_id}}{{/if}}</div>
			<div class="state-drag">三</div>
			<div class="state-view">
				<div class="command-view-value"></div>
				<div class="parameter-view-list">
					{{> state-template-para-view-list}}
				</div>
			</div>
		</div>
		<div class="state-edit">
			<div class="command-value editable-area line">{{cmd_value}}</div>
			<div class="parameter-list">
				{{> state-template-para-list}}
			</div>
		</div>
	</div>
{{/each}}

<!-- state-template-para-list -->
{{#each parameter_list}}

	{{#if type_line}}
		<div class="parameter-item line {{#if para_disabled}}disabled{{/if}}" data-para-name="{{para_name}}">
			<div class="parameter-name">
				{{#if required}}<span>*</span>{{else}}<div class="parameter-remove">-</div>{{/if}}
				{{para_name}}
			</div>
			<div class="parameter-container">
				<div class="parameter-value editable-area line">{{para_value}}</div>
			</div>
		</div>
	{{/if}}

	{{#if type_dict}}
		<div class="parameter-item dict {{#if para_disabled}}disabled{{/if}}" data-para-name="{{para_name}}">
			<div class="parameter-name">
				{{#if required}}<span>*</span>{{else}}<div class="parameter-remove">-</div>{{/if}}
				{{para_name}}
			</div>
			<div class="parameter-container">
				{{> state-template-para-dict-item}}
			</div>
		</div>
	{{/if}}

	{{#if type_array}}
		<div class="parameter-item array {{#if para_disabled}}disabled{{/if}}" data-para-name="{{para_name}}">
			<div class="parameter-name">
				{{#if required}}<span>*</span>{{else}}<div class="parameter-remove">-</div>{{/if}}
				{{para_name}}
			</div>
			<div class="parameter-container">
				{{> state-template-para-array-item}}
			</div>
		</div>
	{{/if}}

	{{#if type_bool}}
		<div class="parameter-item bool {{#if para_disabled}}disabled{{/if}}" data-para-name="{{para_name}}">
			<div class="parameter-name">
				{{#if required}}<span>*</span>{{else}}<div class="parameter-remove">-</div>{{/if}}
				{{para_name}}
			</div>
			<div class="parameter-container">
				<div class="parameter-value editable-area line">{{para_value}}</div>
			</div>
		</div>
	{{/if}}

	{{#if type_text}}
		<div class="parameter-item text {{#if para_disabled}}disabled{{/if}}" data-para-name="{{para_name}}">
			<div class="parameter-name">
				{{#if required}}<span>*</span>{{else}}<div class="parameter-remove">-</div>{{/if}}
				{{para_name}}
			</div>
			<div class="parameter-container">
				<div class="parameter-value editable-area text">{{para_value}}</div>
			</div>
		</div>
	{{/if}}

	{{#if type_state}}
		<div class="parameter-item state {{#if para_disabled}}disabled{{/if}}" data-para-name="{{para_name}}">
			<div class="parameter-name">
				{{#if required}}<span>*</span>{{else}}<div class="parameter-remove">-</div>{{/if}}
				{{para_name}}
			</div>
			<div class="parameter-container">
				{{> state-template-para-array-item}}
			</div>
		</div>
	{{/if}}

{{/each}}

<!-- state-template-para-view-list -->
{{#each parameter_view_list}}

	{{#if type_line}}
		<div class="parameter-item line {{#if para_disabled}}disabled{{/if}}" data-para-name="{{para_name}}">
			<div class="parameter-name">{{para_name}}</div>
			<div class="parameter-value">{{para_value}}</div>
		</div>
	{{/if}}

	{{#if type_dict}}
		<div class="parameter-item dict {{#if para_disabled}}disabled{{/if}}" data-para-name="{{para_name}}">
			<div class="parameter-name">{{para_name}}</div>
			<div class="parameter-value">{{para_value}}</div>
		</div>
	{{/if}}

	{{#if type_array}}
		<div class="parameter-item array {{#if para_disabled}}disabled{{/if}}" data-para-name="{{para_name}}">
			<div class="parameter-name">{{para_name}}</div>
			<div class="parameter-value">{{para_value}}</div>
		</div>
	{{/if}}

	{{#if type_bool}}
		<div class="parameter-item bool {{#if para_disabled}}disabled{{/if}}" data-para-name="{{para_name}}">
			<div class="parameter-name">{{para_name}}</div>
			<div class="parameter-value">{{para_value}}</div>
		</div>
	{{/if}}

	{{#if type_text}}
		<div class="parameter-item text {{#if para_disabled}}disabled{{/if}}" data-para-name="{{para_name}}">
			<div class="parameter-name">{{para_name}}</div>
			<div class="parameter-value">{{para_value}}</div>
		</div>
	{{/if}}

	{{#if type_state}}
		<div class="parameter-item state {{#if para_disabled}}disabled{{/if}}" data-para-name="{{para_name}}">
			<div class="parameter-name">{{para_name}}</div>
			<div class="parameter-value">{{para_value}}</div>
		</div>
	{{/if}}

{{/each}}

<!-- state-template-para-dict-item -->
{{#each para_value}}
	<div class="parameter-dict-item">
		<div class="parameter-value editable-area line key">{{key}}</div>
		<div class="parameter-value editable-area line value">{{value}}</div>
	</div>
{{/each}}

<!-- state-template-para-array-item -->
{{#each para_value}}
	<div class="parameter-value editable-area line">{{this}}</div>
{{/each}}

<!-- state-template-editor-modal -->
<div style="width:1230px;height:610px;" id="state-editor-model">
	<div class="modal-header">
		<h3>Conﬁguration Manager of {{res_name}}</h3>
		<i class="modal-close">&times;</i>
	</div>

	<ul class="modal-toolbar">
		<li class="state-log-toggle"></li>
		<li class="state-desc-toggle active"></li>
	</ul>

	<div id="state-editor-body" class="scroll-content">
		<div id="state-editor" spellcheck="false">
			{{#unless supported_platform}}<div class="state-warning">The AMI's distro cannot be recognised. Some commands may not apply to this AMI.</div>{{/unless}}
			<div class="state-list"></div>
		</div>
		<div id="state-description" data-command=""></div>
		<div id="state-log" data-state-id="">
			<ul class="state-log-list">
				{{> state-template-log-item}}
			</ul>
			<div class="state-log-loading">Loading...</div>
			<div class="state-log-info">
				<div class="state-log-title">All states are pending.</div>
				<div class="state-log-detail">
					<span class="pending">Detailed log will show here when a state succeeds or fails.</span>
					<span class="stoped">The app is currently stopped. Detailed log will show here when the app is started and a state succeeds or fails.</span>
				</div>
			</div>
		</div>
		<div class="state-bottom">
			<div class="state-save">Save</div>
			<div class="state-cancel">Cancel</div>
			<div class="state-close">Close</div>
		</div>
	</div>
</div>

<!-- state-template-log-item -->
{{#each state_logs}}
	<li class="state-log-item">
		<div class="state-log-item-header">
			<div class="state-log-item-name">{{state_id}}</div>
			<div class="state-log-item-time">{{log_time}}</div>
			<div class="state-log-item-status">Success</div>
		</div>
		<div class="state-log-item-detail">{{nl2br stdout}}</div>
		<div class="state-log-item-detail">{{nl2br stderr}}</div>
	</li>
{{/each}}

<!-- template end -->
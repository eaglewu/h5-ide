<!DOCTYPE HTML>
<html>
	<head>
		<link id="css" rel="stylesheet" type="text/css" href="index.css">

		<script type="text/javascript" src="jquery-1.9.1.min.js"></script>
		<link rel="stylesheet" type="text/css" href="jquery.atwho.css">

		<script type="text/javascript" src="jquery.caret.js"></script>
		<script type="text/javascript" src="jquery.atwho.js"></script>

		<script type="text/javascript" src="data.js"></script>

		<script type="text/javascript" src="underscore.js"></script>
		<script type="text/javascript" src="handlebars-v1.1.2.js"></script>

		<script type="text/javascript" src="backbone.js"></script>

		<script id="state-template-state-list" type="x-handlebars-template">
			{{#each state_list}}
				<div class="state-item view" data-command="{{cmd_value}}" data-id="{{state_id}}">
					<div class="state-add">+</div>
					<div class="state-id">{{state_id}}</div>
					<div class="command-value editable-area line" contenteditable="true">{{cmd_value}}</div>
					<div class="parameter-list">
						{{> state-template-para-list}}
					</div>
					<div class="parameter-view-list">
						{{> state-template-para-view-list}}
					</div>
				</div>
			{{/each}}
		</script>

		<script id="state-template-para-list" type="x-handlebars-template">
			{{#each parameter_list}}

				<!-- line type parameter -->
				{{#if type_line}}
					<div class="parameter-item line" data-para-name="{{para_name}}">
						<div class="parameter-name">{{para_name}}{{#if required}} (required){{/if}}</div>
						<div class="parameter-container">
							<div class="parameter-value editable-area line" contenteditable="true">{{para_value}}</div>
						</div>
					</div>
				{{/if}}

				<!-- dict type parameter --> 
				{{#if type_dict}}
					<div class="parameter-item dict" data-para-name="{{para_name}}">
						<div class="parameter-name">{{para_name}}{{#if required}} (required){{/if}}</div>
						<div class="parameter-container">
							{{> state-template-para-dict-item}}
						</div>
					</div>
				{{/if}}

				<!-- array type parameter --> 
				{{#if type_array}}
					<div class="parameter-item array" data-para-name="{{para_name}}">
						<div class="parameter-name">{{para_name}}{{#if required}} (required){{/if}}</div>
						<div class="parameter-container">
							{{> state-template-para-array-item}}
						</div>
					</div>
				{{/if}}

				<!-- bool type parameter --> 
				{{#if type_bool}}
					<div class="parameter-item bool" data-para-name="{{para_name}}">
						<div class="parameter-name">{{para_name}}{{#if required}} (required){{/if}}</div>
						<div class="parameter-container">
							<div class="parameter-value editable-area line" contenteditable="true">{{para_value}}</div>
						</div>
					</div>
				{{/if}}

				<!-- text type parameter --> 
				{{#if type_text}}
					<div class="parameter-item text" data-para-name="{{para_name}}">
						<div class="parameter-name">{{para_name}}{{#if required}} (required){{/if}}</div>
						<div class="parameter-container">
							<div class="parameter-value editable-area text" contenteditable="true">{{para_value}}</div>
						</div>
					</div>
				{{/if}}

			{{/each}}
		</script>

		<script id="state-template-para-view-list" type="x-handlebars-template">
			{{#each parameter_view_list}}

				<!-- line type parameter -->
				{{#if type_line}}
					<div class="parameter-item line" data-para-name="{{para_name}}">
						<div class="parameter-value">{{para_value}}</div>
					</div>
				{{/if}}

				<!-- dict type parameter --> 
				{{#if type_dict}}
					<div class="parameter-item dict" data-para-name="{{para_name}}">
						<div class="parameter-value">{{para_value}}</div>
					</div>
				{{/if}}

				<!-- array type parameter --> 
				{{#if type_array}}
					<div class="parameter-item array" data-para-name="{{para_name}}">
						<div class="parameter-value">{{para_value}}</div>
					</div>
				{{/if}}

				<!-- bool type parameter --> 
				{{#if type_bool}}
					<div class="parameter-item bool" data-para-name="{{para_name}}">
						<div class="parameter-value">{{para_value}}</div>
					</div>
				{{/if}}

				<!-- text type parameter --> 
				{{#if type_text}}
					<div class="parameter-item text" data-para-name="{{para_name}}">
						<div class="parameter-value">{{para_value}}</div>
					</div>
				{{/if}}

			{{/each}}
		</script>

		<script id="state-template-para-dict-item" type="x-handlebars-template">
			{{#each para_value}}
				<div class="parameter-dict-item">
					<div class="parameter-value editable-area line key" contenteditable="true">{{key}}</div>
					<div class="parameter-value editable-area line value" contenteditable="true">{{value}}</div>
				</div>
			{{/each}}
		</script>

		<script id="state-template-para-array-item" type="x-handlebars-template">
			{{#each para_value}}
				<div class="parameter-value editable-area line" contenteditable="true">{{this}}</div>
			{{/each}}
		</script>

		<script type="text/javascript" src="model.js"></script>
		<script type="text/javascript" src="view.js"></script>
		<script type="text/javascript" src="index.js"></script>
	</head>
	<body>
		<div id="state-editor" spellcheck="false"></div>
	</body>
<requiredl>